<!DOCTYPE html>
<html xmlns:layout="http://ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org" layout:decorate="~{layout/basic.html}">

<head>
	<title>Board Register</title>
</head>

<div layout:fragment="content">
<!-- ================================================== -->

<style>
.input-group-text {width:150px;}
</style>

<div class="col">
<div class="card">
	<div class="card-header">
		Board Register
	</div>
	<div class="card-body">
		<th:block th:if="${param.bno!=null}"><form action="/board/modify" method="post"></th:block>
		<th:block th:if="${param.bno==null}"><form action="/board/register" method="post"></th:block>		
			<div th:if="${param.bno}" class="input-group mb-3">
				<span class="input-group-text">bno</span>
				<input type="text" name="bno" class="form-control" placeholder="Title" th:value="${dto.bno}" readonly />
			</div>
			<div class="input-group mb-3">
				<span class="input-group-text">Title</span>
				<input th:if="${param.bno!=null}" type="text" name="title" class="form-control" placeholder="Title" th:value="${dto.title}" />
				<input th:if="${param.bno==null}" type="text" name="title" class="form-control" placeholder="Title" value="" />
			</div>
			<div class="input-group mb-3">
				<span class="input-group-text">Content</span>
				<textarea class="form-control col-sm-5" rows="5" name="content"><th:block  th:if="${param.bno!=null}">[[${dto.content}]]</th:block></textarea>
			</div>
			<div class="input-group mb-3">
				<span class="input-group-text">Writer</span>
				<input th:if="${param.bno!=null}" type="text" name="writer" class="form-control" placeholder="Writer" th:value="${dto.writer}" />
				<input th:if="${param.bno==null}" type="text" name="writer" class="form-control" placeholder="Writer" value="" />
			</div>
			<div class="float-end">
				<button type="submit" class="btn btn-primary">Submit</button>
				<button type="reset" class="btn btn-secondary">Reset</button>
			</div>													
		</form>
	</div>
</div>
</div>

<!-- ================================================== -->	
</div>

<script layout:fragment="script" th:inline="javascript">
const errors = [[${errors}]]
console.log(errors)	
let errorMsg = ''
if(errors){
	for(let i=0; i<errors.length; i++){
		errorMsg += `${errors[i].field}은(는) ${errors[i].code} \n`
	}
	alert(errorMsg)
}
</script>